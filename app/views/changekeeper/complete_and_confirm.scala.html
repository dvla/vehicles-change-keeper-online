@(data: models.CompleteAndConfirmViewModel,
  dateService: uk.gov.dvla.vehicles.presentation.common.services.DateService)(implicit lang: Lang,
  token: uk.gov.dvla.vehicles.presentation.common.filters.CsrfPreventionAction.CsrfPreventionToken,
  config: utils.helpers.Config)

@import views.html.helper.form
@import controllers.routes.CompleteAndConfirm
@import uk.gov.dvla.vehicles.presentation.common
@import common.mappings.Mileage
@import common.views.html.widgets.dates.inputDayMonthYearTextbox
@import common.views.html.widgets.base.csrfTokenHiddenField
@import common.views.helpers.BaseTemplate.fieldConstructor
@import common.views.html.widgets.base.{valtechInputText, valtechDeclareCheck}
@import common.views.helpers.LabelHelper.optionalFieldKey
@import models.DateOfSaleFormModel.Form.{MileageId, DateOfSaleId, TodaysDateId}
@import models.CompleteAndConfirmFormModel.Form.ConsentId
@import views.changekeeper.CompleteAndConfirm.{BackId, SubmitId, modify}

@main(
    progress = Some(Messages("change_keeper_progress_6")),
    title = Messages("change_keeper_completeAndConfirm.title"),
    currentForm = Some(data.form)
) {

    <div class="two-col clearfix acquire-complete-confirm">

        <div class="second-col">

            <h1>@Messages("change_keeper_completeAndConfirm.title")</h1>

            <div>
                <h2>@Messages("change_keeper_completeandconfirm.newkeeperDetails")</h2>
              <p>
                @Messages("change_keeper_completeandconfirm.displayName")<br/>
                <strong>@data.keeperDetails.displayName</strong><br/>
              </p>
              <p>
                @Messages("change_keeper_completeandconfirm.address")<br/>
                @for(addr <- data.keeperDetails.address.address) {<strong>@addr</strong><br/>}
              </p>

              <p>
                @Messages("change_keeper_completeandconfirm.email")<br/>
                @if(data.keeperDetails.email == None) {
                    <strong>@Messages("change_keeper_completeandconfirm.emailNotEntered")</strong><br/>
                } else {
                    <strong> @data.keeperDetails.email.get</strong><br/>
                }
              </p>

              <p>
                @if(data.keeperDetails.isBusinessKeeper) {
                    @Messages("change_keeper_completeandconfirm.fleetNumber")<br/>
                    @if(data.keeperDetails.fleetNumber == None) {
                        <strong>@Messages("change_keeper_completeandconfirm.fleetNumberNotEntered")</strong>
                    } else {
                        <strong>@data.keeperDetails.fleetNumber.get</strong>
                    }
                }
              </p>
            </div>

            <div>
                <h2>@Messages("change_keeper_completeandconfirm.vehicleDetails")</h2>
                <p>
                  @Messages("change_keeper_completeandconfirm.vehicleReg")<br/>
                  <strong>@data.vehicleAndKeeperDetails.registrationNumber</strong>
                </p>

              <p>
                @Messages("change_keeper_completeandconfirm.vehicleMake")<br/>
                <strong>@data.vehicleAndKeeperDetails.make</strong>
              </p>

              <p>
                @Messages("change_keeper_completeandconfirm.vehicleModel")<br/>
                <strong>@data.vehicleAndKeeperDetails.model</strong>
              </p>

              <p>
                @Messages("change_keeper_completeAndConfirm.mileage.label")<br/>
                <strong>
                    @if(data.dateOfSaleModel.mileage.isDefined) {
                      @data.dateOfSaleModel.mileage.get.toString
                    } else {
                      @Messages("change_keeper_completeandconfirm.emailNotEntered")
                    }
                </strong>
              </p>

              <p>
                @Messages("change_keeper_completeAndConfirm.date_of_sale")<br/>
                <strong>@data.dateOfSaleModel.dateOfSale.toString("dd/MM/yyyy")</strong>
              </p>

            </div>

            @form(action = controllers.routes.CompleteAndConfirm.submit()) {
                @csrfTokenHiddenField()

            @valtechDeclareCheck(
              data.form(ConsentId),
              None,
              Map(
                'autofocus -> true,
                '_showConstraints -> false,
                '_label -> Messages("change_keeper_keeperdetailscomplete.consent")
              )
            )

                <div class="form-steps">
                    <button id="@SubmitId"
                        type="submit"
                        name="action"
                        class="button">
                        @Messages("change_keeper_completeAndConfirm.submitbutton")
                    </button>
                    <br/>
                    <a class="back" id="@BackId"
                        href="@controllers.routes.CompleteAndConfirm.back()">
                        @Messages("change_keeper_completeAndConfirm.backbutton")
                    </a>
                </div>
            }
        </div>
    </div>
    <script src="@controllers.StaticAssets.versioned(config.assetsUrl)("javascripts/firefox-dont-cache-page.js")"
            type="text/javascript"></script>
}
